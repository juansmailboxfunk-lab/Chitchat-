/* =========================================
   Chit Chat — Services UX Upgrade
   - horizontal expand (60–70%)
   - dim others + highlight
   - icon show + subtle animation
   - per-service gradients (only when open)
   ========================================= */

@media (min-width: 920px){
  .services-grid{
    position: relative;
    align-items: start;
  }

  /* Dim non-active cards when one is open */
  .services-grid.has-open .service-card:not(.is-open){
    opacity: .55;
    filter: saturate(.92);
    transition: opacity .2s ease, filter .2s ease;
  }

  /* Open card takes ~66% of a 3-col grid */
  .service-card.is-open{
    grid-column: 1 / span 2; /* ~66% width */
    z-index: 3;
    box-shadow: 0 20px 46px rgba(0,0,0,.12);
    transform: translateY(-2px);
  }

  /* If open card is in middle/right, expand to the right */
  .service-card.is-open.align-right{
    grid-column: 2 / span 2;
  }

  /* Soft spotlight behind open card */
  .service-card{
    position: relative;
    transition: grid-column .35s ease, box-shadow .25s ease, transform .25s ease;
  }
  .service-card.is-open::before{
    content:"";
    position:absolute;
    inset:-14px;
    border-radius: calc(var(--radius, 18px) + 14px);
    filter: blur(10px);
    z-index: -1;
    pointer-events:none;
    opacity: 1;
    background:
      radial-gradient(circle at 20% 20%, rgba(250,204,21,.20), transparent 60%),
      radial-gradient(circle at 80% 30%, rgba(251,113,133,.14), transparent 62%),
      radial-gradient(circle at 55% 90%, rgba(192,132,252,.10), transparent 60%);
  }
}

/* ---------- Icons: ensure real images show ---------- */
.service-icon{
  width: 56px;
  height: 56px;
  border-radius: 14px;
  background: transparent !important;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

.service-icon img{
  width: 100%;
  height: 100%;
  object-fit: contain;
  transform: translateZ(0);
}

/* Subtle icon “pop” when opening */
@keyframes iconPop {
  0%   { transform: scale(1) rotate(0deg); }
  45%  { transform: scale(1.06) rotate(-1deg); }
  100% { transform: scale(1) rotate(0deg); }
}
.service-card.is-open .service-icon img{
  animation: iconPop 420ms ease-out both;
}

/* ---------- Per-service gradient (only when open) ---------- */
/* We set data-service="<slug>" in JS, so these work even if HTML has none. */

.service-card.is-open[data-service="estimulacion"]{
  background: linear-gradient(135deg, rgba(254,249,195,.85), rgba(253,230,255,.60));
}
.service-card.is-open[data-service="comunicacion"]{
  background: linear-gradient(135deg, rgba(224,231,255,.80), rgba(254,249,195,.55));
}
.service-card.is-open[data-service="articulacion"]{
  background: linear-gradient(135deg, rgba(255,228,230,.75), rgba(219,234,254,.55));
}
.service-card.is-open[data-service="alimentacion"]{
  background: linear-gradient(135deg, rgba(220,252,231,.75), rgba(254,249,195,.55));
}
.service-card.is-open[data-service="neurodiversidad"]{
  background: linear-gradient(135deg, rgba(233,213,255,.65), rgba(224,231,255,.55));
}
.service-card.is-open[data-service="familias"]{
  background: linear-gradient(135deg, rgba(254,249,195,.70), rgba(255,228,230,.55));
}

/* Better focus ring for keyboard users */
.service-toggle:focus-visible,
.toggle:focus-visible,
button:focus-visible,
a:focus-visible{
  outline: 3px solid rgba(59,130,246,.45);
  outline-offset: 3px;
  border-radius: 999px;
}

@media (min-width: 768px) {
  .modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1000;
  }
}

